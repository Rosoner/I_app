<div *ngIf="isLoading" class="loader">Loading movie...</div>

<div class="view-poem" *ngIf="!editingMovie">
  <div class="controls">
    <button
      *ngIf="movie._ownerId == loggedInUser"
      class="button"
      class="inputField"
      (click)="deleteMovie()"
    >
      Delete Movie
    </button>
    <button
      *ngIf="movie._ownerId == loggedInUser"
      class="button"
      class="inputField"
      (click)="toggleEditing()"
    >
      Edit Movie
    </button>
  </div>

  <div class="poem" *ngIf="movie">
    <h1><span>Title:</span>{{ movie.movieName }}</h1>
    <h3><span>Genre:</span>{{ movie.movieGenre }}</h3>
    <h3><span>Producer:</span>{{ movie.movieProducer }}</h3>
    <h3><span>Summary:</span> {{ movie.summary }}</h3>
    <h5>Written by: {{ movie.username }}</h5>
    <div class="content"><span>Content:</span> {{ movie.content }}</div>
  </div>
</div>




<div class="edit-poem" *ngIf="editingMovie">
  <div class="controls">
    <button
      *ngIf="movie._ownerId == loggedInUser"
      class="button"
      class="inputField"
      (click)="editingMovie = false"
    >
      Cancel
    </button>
  </div>

  <form #editMovieForm="ngForm" (ngSubmit)="saveChanges()">
 <!-- movie name -->
     <div class="form-group" class="inputField">
    <p>Movie title:</p>
    <input
      type="text"
      id="title"
      name="movieName"
      #movieNameInput="ngModel"
      ngModel
      required
      minlength="3"
      [value]="movie.movieName"
    />
  </div>

  <div *ngIf="movieNameInput.touched" class="inputField">
    <div *ngIf="movieNameInput.errors?.['minlength']">
      Title must be at least 3 characters!
    </div>
  </div>

<!-- movie genre -->

<div class="form-group" class="inputField">
  <p>Movie genre:</p>
  <input
    type="text"
    id="title"
    name="movieGenre"
    #movieGenreInput="ngModel"
    ngModel
    required
    minlength="3"
    [value]="movie.movieGenre"
  />
</div>

<div *ngIf="movieGenreInput.touched" class="inputField">
  <div *ngIf="movieGenreInput.errors?.['minlength']">
    Title must be at least 3 characters!
  </div>
</div>

    <!-- movie producer -->

    <div class="form-group" class="inputField">
      <p>Movie producer:</p>
      <input
        type="text"
        id="title"
        name="movieProducer"
        #movieProducerInput="ngModel"
        ngModel
        required
        minlength="3"
        [value]="movie.movieProducer"
      />
    </div>
  
    <div *ngIf="movieProducerInput.touched" class="inputField">
      <div *ngIf="movieProducerInput.errors?.['minlength']">
        Title must be at least 3 characters!
      </div>
    </div>

  <!-- movie summary -->

  <div class="form-group" class="inputField">
    <p>Movie summary:</p>
    <input
      type="text"
      id="summary"
      name="summary"
      #movieSummaryInput="ngModel"
      ngModel
      cols="30"
      rows="5"
      required
      minlength="3"
      [value]="movie.summary"
    />
  </div>

  <div *ngIf="movieSummaryInput.touched" class="inputField">
    <div *ngIf="movieSummaryInput.errors?.['minlength']">
      Summary must be at least 3 characters!
    </div>
  </div>
  

    <div class="form-group" class="inputField">
      <p>Movie:</p>
      <textarea
        type="text"
        id="content"
        name="content"
        #movieContentInput="ngModel"
        ngModel
        cols="30"
        rows="10"
        required
        [value]="movie.content"
      ></textarea>
    </div>

    <button>Save changes</button>
  </form>
</div>
